# WinFormså›¾ä¹¦ç®¡ç†ç³»ç»Ÿ ğŸ“š

[![.NET Framework](https://img.shields.io/badge/.NET%20Framework-4.8-blue.svg)](https://dotnet.microsoft.com/download/dotnet-framework)
[![Entity Framework](https://img.shields.io/badge/Entity%20Framework-6.2.0-green.svg)](https://docs.microsoft.com/en-us/ef/)
[![SQL Server](https://img.shields.io/badge/SQL%20Server-2012+-red.svg)](https://www.microsoft.com/sql-server)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

ä¸€ä¸ªåŸºäºC# WinFormså¼€å‘çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ä¸‰å±‚æ¶æ„è®¾è®¡ï¼Œå®ç°äº†å®Œæ•´çš„å›¾ä¹¦å€Ÿé˜…ç®¡ç†åŠŸèƒ½ã€‚è¯¥é¡¹ç›®é€‚åˆä½œä¸ºæ¯•ä¸šè®¾è®¡æˆ–å­¦ä¹ C# WinFormså¼€å‘çš„å‚è€ƒé¡¹ç›®ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### ä¸»è¦åŠŸèƒ½
- ğŸ” **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - æ”¯æŒé‚®ç®±ç™»å½•å’ŒéªŒè¯ç éªŒè¯
- ğŸ“– **å›¾ä¹¦ç®¡ç†** - å›¾ä¹¦ä¿¡æ¯ç»´æŠ¤ã€åº“å­˜ç®¡ç†
- ğŸ“ **å€Ÿé˜…ç®¡ç†** - å›¾ä¹¦å€Ÿé˜…ã€å½’è¿˜ã€è®°å½•æŸ¥è¯¢
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯ç®¡ç†ã€æƒé™æ§åˆ¶
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - å€Ÿé˜…è®°å½•ç»Ÿè®¡å’Œç®¡ç†

### æŠ€æœ¯æ ˆ
- **å¼€å‘è¯­è¨€**: C#
- **UIæ¡†æ¶**: Windows Forms
- **æ•°æ®è®¿é—®**: Entity Framework 6.2.0 (Database First)
- **æ•°æ®åº“**: SQL Server 2012+
- **å¼€å‘ç¯å¢ƒ**: .NET Framework 4.8
- **å¼€å‘å·¥å…·**: Visual Studio 2022

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¡¨ç¤ºå±‚ (UI Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   LoginForm     â”‚ â”‚  BookManager    â”‚ â”‚  UserControls   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¸šåŠ¡é€»è¾‘å±‚ (BLL Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   LoginBLL      â”‚ â”‚ BookManagerBLL  â”‚ â”‚   ManagerBLL    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®è®¿é—®å±‚ (DAL Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   LoginDAL      â”‚ â”‚ BookManagerDAL  â”‚ â”‚   ManagerDAL    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®æ¨¡å‹å±‚ (Models)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      User       â”‚ â”‚      Book       â”‚ â”‚  BorrowRecord   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®åº“å±‚ (Database)                       â”‚
â”‚                      SQL Server                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„å±‚èŒè´£

| å±‚æ¬¡ | é¡¹ç›®åç§° | ä¸»è¦èŒè´£ |
|------|----------|----------|
| **UIå±‚** | WinFromsLibraryMini | ç”¨æˆ·ç•Œé¢å±•ç¤ºã€ç”¨æˆ·äº¤äº’å¤„ç† |
| **BLLå±‚** | LibraryBLL | ä¸šåŠ¡é€»è¾‘å¤„ç†ã€æ•°æ®éªŒè¯ |
| **DALå±‚** | LibraryDAL | æ•°æ®è®¿é—®ã€æ•°æ®åº“æ“ä½œ |
| **Modelså±‚** | LibraryModels | å®ä½“æ¨¡å‹ã€æ•°æ®ç»“æ„å®šä¹‰ |

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **ç™»å½•éªŒè¯**: é‚®ç®± + å¯†ç  + éªŒè¯ç ä¸‰é‡éªŒè¯
- **éªŒè¯ç **: åŠ¨æ€ç”Ÿæˆ4ä½å­—æ¯æ•°å­—æ··åˆéªŒè¯ç 
- **ä¼šè¯ç®¡ç†**: ç™»å½•çŠ¶æ€ä¿æŒå’Œç”¨æˆ·ä¿¡æ¯ä¼ é€’

```csharp
// ç™»å½•éªŒè¯æ ¸å¿ƒä»£ç 
public User Login(string email, string password)
{
    return _DbContext.Users.FirstOrDefault(u => u.Email == email && u.Password == password);
}
```

### ğŸ“– å›¾ä¹¦ç®¡ç†åŠŸèƒ½
- **å›¾ä¹¦å±•ç¤º**: DataGridViewå±•ç¤ºå›¾ä¹¦åˆ—è¡¨
- **å›¾ä¹¦å€Ÿé˜…**: ä¸€é”®å€Ÿé˜…ï¼Œè‡ªåŠ¨å‡å°‘åº“å­˜
- **åº“å­˜ç®¡ç†**: å®æ—¶åº“å­˜æ›´æ–°å’Œæ˜¾ç¤º

### ğŸ“ å€Ÿé˜…è®°å½•ç®¡ç†
- **å€Ÿé˜…è®°å½•**: å®Œæ•´çš„å€Ÿé˜…å†å²è®°å½•
- **å½’è¿˜ç®¡ç†**: å›¾ä¹¦å½’è¿˜å’Œåº“å­˜æ¢å¤
- **çŠ¶æ€è·Ÿè¸ª**: å€Ÿé˜…çŠ¶æ€å®æ—¶æ›´æ–°

```csharp
// å›¾ä¹¦å½’è¿˜æ ¸å¿ƒä»£ç 
public int ReturnBook(int RecordId)
{
    borrowRecord = _DbContext.BorrowRecords.FirstOrDefault(b => b.RecordId == RecordId);
    borrowRecord.ReturnDate = DateTime.Now;
    AddStock(borrowRecord.BookId);  // æ¢å¤åº“å­˜
    _DbContext.SaveChanges();
    return 1;
}
```

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- **ç”¨æˆ·åˆ—è¡¨**: æŸ¥çœ‹æ‰€æœ‰æ³¨å†Œç”¨æˆ·
- **ç”¨æˆ·åˆ é™¤**: ç®¡ç†å‘˜æƒé™ç”¨æˆ·åˆ é™¤
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„åŠŸèƒ½è®¿é—®æ§åˆ¶

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨

#### Users ç”¨æˆ·è¡¨
| å­—æ®µå | æ•°æ®ç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| UserId | int (PK) | ç”¨æˆ·ID |
| Username | nvarchar(50) | ç”¨æˆ·å |
| Password | nvarchar(50) | å¯†ç  |
| Role | nvarchar(20) | ç”¨æˆ·è§’è‰² |
| Email | nvarchar(100) | é‚®ç®±åœ°å€ |
| Phone | nvarchar(20) | ç”µè¯å·ç  |

#### Books å›¾ä¹¦è¡¨
| å­—æ®µå | æ•°æ®ç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| BookId | int (PK) | å›¾ä¹¦ID |
| Title | nvarchar(100) | ä¹¦å |
| Author | nvarchar(50) | ä½œè€… |
| Publisher | nvarchar(50) | å‡ºç‰ˆç¤¾ |
| ISBN | nvarchar(20) | ISBNå· |
| Price | decimal(10,2) | ä»·æ ¼ |
| Stock | int | åº“å­˜æ•°é‡ |
| Summary | nvarchar(500) | å›¾ä¹¦ç®€ä»‹ |

#### BorrowRecords å€Ÿé˜…è®°å½•è¡¨
| å­—æ®µå | æ•°æ®ç±»å‹ | è¯´æ˜ |
|--------|----------|------|
| RecordId | int (PK) | è®°å½•ID |
| UserId | int (FK) | ç”¨æˆ·ID |
| BookId | int (FK) | å›¾ä¹¦ID |
| BorrowDate | datetime | å€Ÿé˜…æ—¥æœŸ |
| ReturnDate | datetime | å½’è¿˜æ—¥æœŸ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
WinFromsLibraryMini/
â”œâ”€â”€ WinFromsLibraryMini/           # ä¸»åº”ç”¨ç¨‹åºé¡¹ç›®
â”‚   â”œâ”€â”€ Forms/                     # çª—ä½“æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ LoginForm.cs          # ç™»å½•çª—ä½“
â”‚   â”‚   â”œâ”€â”€ BookManager.cs        # ä¸»ç®¡ç†çª—ä½“
â”‚   â”‚   â”œâ”€â”€ baseForm.cs           # åŸºç¡€çª—ä½“ç±»
â”‚   â”‚   â””â”€â”€ UsersC/               # ç”¨æˆ·æ§ä»¶
â”‚   â”‚       â”œâ”€â”€ BookManagerUserControl.cs    # å›¾ä¹¦ç®¡ç†æ§ä»¶
â”‚   â”‚       â”œâ”€â”€ ManagerUserControl.cs        # ç®¡ç†å‘˜æ§ä»¶
â”‚   â”‚       â””â”€â”€ UsersUserControl.cs          # ç”¨æˆ·ç®¡ç†æ§ä»¶
â”‚   â”œâ”€â”€ Program.cs                # ç¨‹åºå…¥å£ç‚¹
â”‚   â”œâ”€â”€ App.config               # åº”ç”¨ç¨‹åºé…ç½®
â”‚   â””â”€â”€ packages.config          # NuGetåŒ…é…ç½®
â”œâ”€â”€ LibraryBLL/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ LoginBLL.cs              # ç™»å½•ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ BookManagerBLL.cs        # å›¾ä¹¦ç®¡ç†ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ManagerBLL.cs            # ç®¡ç†å‘˜ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ UsersBLL.cs              # ç”¨æˆ·ç®¡ç†ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ LibraryDAL/                   # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ LoginDAL.cs              # ç™»å½•æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ BookManagerDAL.cs        # å›¾ä¹¦ç®¡ç†æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ ManagerDAL.cs            # ç®¡ç†å‘˜æ•°æ®è®¿é—®
â”‚   â””â”€â”€ UsersDAL.cs              # ç”¨æˆ·ç®¡ç†æ•°æ®è®¿é—®
â”œâ”€â”€ DbHelp/ (LibraryModels)       # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ User.cs                  # ç”¨æˆ·å®ä½“ç±»
â”‚   â”œâ”€â”€ Book.cs                  # å›¾ä¹¦å®ä½“ç±»
â”‚   â”œâ”€â”€ BorrowRecord.cs          # å€Ÿé˜…è®°å½•å®ä½“ç±»
â”‚   â”œâ”€â”€ WinFromsLibraryMini.Context.cs  # EFä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ WinFromsLibraryMini.edmx # Entity Frameworkæ¨¡å‹
â””â”€â”€ packages/                     # NuGetåŒ…æ–‡ä»¶å¤¹
```

### ä¸»è¦æ–‡ä»¶è¯´æ˜

#### è¡¨ç¤ºå±‚ (UI Layer)
- **LoginForm.cs**: ç³»ç»Ÿç™»å½•ç•Œé¢ï¼ŒåŒ…å«é‚®ç®±ã€å¯†ç è¾“å…¥å’ŒéªŒè¯ç éªŒè¯
- **BookManager.cs**: ä¸»ç®¡ç†ç•Œé¢ï¼ŒåŒ…å«èœå•å¯¼èˆªå’Œç”¨æˆ·æ§ä»¶å®¹å™¨
- **baseForm.cs**: åŸºç¡€çª—ä½“ç±»ï¼Œæä¾›é€šç”¨çš„çª—ä½“åŠŸèƒ½
- **UserControls**: æ¨¡å—åŒ–çš„ç”¨æˆ·æ§ä»¶ï¼Œå®ç°ä¸åŒåŠŸèƒ½æ¨¡å—

#### ä¸šåŠ¡é€»è¾‘å±‚ (BLL Layer)
- **LoginBLL.cs**: å¤„ç†ç”¨æˆ·ç™»å½•éªŒè¯é€»è¾‘
- **BookManagerBLL.cs**: å¤„ç†å›¾ä¹¦ç®¡ç†ç›¸å…³ä¸šåŠ¡é€»è¾‘
- **ManagerBLL.cs**: å¤„ç†å€Ÿé˜…è®°å½•ç®¡ç†ä¸šåŠ¡é€»è¾‘
- **UsersBLL.cs**: å¤„ç†ç”¨æˆ·ç®¡ç†ä¸šåŠ¡é€»è¾‘

#### æ•°æ®è®¿é—®å±‚ (DAL Layer)
- **LoginDAL.cs**: ç”¨æˆ·ç™»å½•æ•°æ®è®¿é—®ï¼ŒåŒ…å«ç”¨æˆ·éªŒè¯æŸ¥è¯¢
- **BookManagerDAL.cs**: å›¾ä¹¦æ•°æ®è®¿é—®ï¼ŒåŒ…å«å›¾ä¹¦æŸ¥è¯¢å’Œå€Ÿé˜…æ“ä½œ
- **ManagerDAL.cs**: å€Ÿé˜…è®°å½•æ•°æ®è®¿é—®ï¼ŒåŒ…å«è®°å½•æŸ¥è¯¢å’Œå½’è¿˜æ“ä½œ
- **UsersDAL.cs**: ç”¨æˆ·æ•°æ®è®¿é—®ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯ç®¡ç†

#### æ•°æ®æ¨¡å‹å±‚ (Models Layer)
- **User.cs**: ç”¨æˆ·å®ä½“ç±»ï¼ŒåŒ…å«ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œå¯¼èˆªå±æ€§
- **Book.cs**: å›¾ä¹¦å®ä½“ç±»ï¼ŒåŒ…å«å›¾ä¹¦è¯¦ç»†ä¿¡æ¯å’Œåº“å­˜ç®¡ç†
- **BorrowRecord.cs**: å€Ÿé˜…è®°å½•å®ä½“ç±»ï¼Œå…³è”ç”¨æˆ·å’Œå›¾ä¹¦
- **WinFromsLibraryMini.Context.cs**: Entity Frameworkæ•°æ®åº“ä¸Šä¸‹æ–‡

## ğŸš€ å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 7/8/10/11
- **å¼€å‘ç¯å¢ƒ**: .NET Framework 4.8
- **æ•°æ®åº“**: SQL Server 2012 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å¼€å‘å·¥å…·**: Visual Studio 2019/2022 (æ¨è)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/yourusername/WinFromsLibraryMini.git
   cd WinFromsLibraryMini
   ```

2. **æ•°æ®åº“é…ç½®**
   - åœ¨SQL Serverä¸­åˆ›å»ºæ•°æ®åº“ `WinFromsLibraryMini`
   - ä¿®æ”¹ `App.config` ä¸­çš„è¿æ¥å­—ç¬¦ä¸²ï¼š
   ```xml
   <connectionStrings>
     <add name="WinFromsLibraryMiniEntities"
          connectionString="data source=ä½ çš„æœåŠ¡å™¨;initial catalog=WinFromsLibraryMini;user id=ä½ çš„ç”¨æˆ·å;password=ä½ çš„å¯†ç " />
   </connectionStrings>
   ```

3. **æ•°æ®åº“åˆå§‹åŒ–**
   ```sql
   -- åˆ›å»ºç”¨æˆ·è¡¨
   CREATE TABLE Users (
       UserId int IDENTITY(1,1) PRIMARY KEY,
       Username nvarchar(50) NOT NULL,
       Password nvarchar(50) NOT NULL,
       Role nvarchar(20) NOT NULL,
       Email nvarchar(100) NOT NULL,
       Phone nvarchar(20)
   );

   -- åˆ›å»ºå›¾ä¹¦è¡¨
   CREATE TABLE Books (
       BookId int IDENTITY(1,1) PRIMARY KEY,
       Title nvarchar(100) NOT NULL,
       Author nvarchar(50),
       Publisher nvarchar(50),
       ISBN nvarchar(20),
       Price decimal(10,2),
       Stock int NOT NULL,
       Summary nvarchar(500)
   );

   -- åˆ›å»ºå€Ÿé˜…è®°å½•è¡¨
   CREATE TABLE BorrowRecords (
       RecordId int IDENTITY(1,1) PRIMARY KEY,
       UserId int NOT NULL,
       BookId int NOT NULL,
       BorrowDate datetime NOT NULL,
       ReturnDate datetime,
       FOREIGN KEY (UserId) REFERENCES Users(UserId),
       FOREIGN KEY (BookId) REFERENCES Books(BookId)
   );
   ```

4. **è¿˜åŸNuGetåŒ…**
   ```bash
   nuget restore WinFromsLibraryMini.sln
   ```

5. **ç¼–è¯‘è¿è¡Œ**
   - ä½¿ç”¨Visual Studioæ‰“å¼€ `WinFromsLibraryMini.sln`
   - è®¾ç½® `WinFromsLibraryMini` ä¸ºå¯åŠ¨é¡¹ç›®
   - æŒ‰ `F5` è¿è¡Œé¡¹ç›®

### é»˜è®¤ç™»å½•ä¿¡æ¯
```sql
-- æ’å…¥æµ‹è¯•ç”¨æˆ·æ•°æ®
INSERT INTO Users (Username, Password, Role, Email, Phone) VALUES
('admin', '123456', 'Admin', 'admin@example.com', '13800138000'),
('user1', '123456', 'User', 'user1@example.com', '13800138001');

-- æ’å…¥æµ‹è¯•å›¾ä¹¦æ•°æ®
INSERT INTO Books (Title, Author, Publisher, ISBN, Price, Stock, Summary) VALUES
('C#ç¨‹åºè®¾è®¡', 'å¼ ä¸‰', 'æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾', '978-7-302-12345-6', 45.00, 10, 'C#ç¼–ç¨‹å…¥é—¨æ•™ç¨‹'),
('æ•°æ®åº“åŸç†', 'æå››', 'æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾', '978-7-111-23456-7', 52.00, 8, 'æ•°æ®åº“è®¾è®¡ä¸åº”ç”¨');
```

**é»˜è®¤ç™»å½•è´¦æˆ·**:
- ç®¡ç†å‘˜: admin@example.com / 123456
- æ™®é€šç”¨æˆ·: user1@example.com / 123456

## ğŸ’» æŠ€æœ¯å®ç°è¯¦è§£

### Entity Framework æ•°æ®è®¿é—®
é¡¹ç›®ä½¿ç”¨Entity Framework 6.2.0 Database Firstæ–¹å¼ï¼Œé€šè¿‡.edmxæ–‡ä»¶ç®¡ç†æ•°æ®æ¨¡å‹ï¼š

```csharp
// DbContext ä¸Šä¸‹æ–‡ç±»
public partial class WinFromsLibraryMiniEntities : DbContext
{
    public WinFromsLibraryMiniEntities() : base("name=WinFromsLibraryMiniEntities") { }

    public virtual DbSet<Book> Books { get; set; }
    public virtual DbSet<BorrowRecord> BorrowRecords { get; set; }
    public virtual DbSet<User> Users { get; set; }
}
```

### æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®ç°

#### å›¾ä¹¦å€Ÿé˜…é€»è¾‘
```csharp
public int AddBook(int UserId, int BookId)
{
    try
    {
        // åˆ›å»ºå€Ÿé˜…è®°å½•
        _BorrowRecord.UserId = UserId;
        _BorrowRecord.BookId = BookId;
        _BorrowRecord.BorrowDate = DateTime.Now;
        _BorrowRecord.ReturnDate = null;
        _DbContext.BorrowRecords.Add(_BorrowRecord);

        // å‡å°‘åº“å­˜
        ReduceStock(BookId);

        // ä¿å­˜æ›´æ”¹
        _DbContext.SaveChanges();
        return 1;
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
        return 0;
    }
}
```

#### éªŒè¯ç ç”Ÿæˆæœºåˆ¶
```csharp
private void CodeVeriify()
{
    const string chars = "qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM0123456789";
    string code = new string(Enumerable.Repeat(chars, 4)
        .Select(s => s[random.Next(s.Length)]).ToArray());
    textBoxCode.Text = code;
}
```

### WinFormsç•Œé¢è®¾è®¡æ¨¡å¼
- **åŸºç¡€çª—ä½“ç»§æ‰¿**: æ‰€æœ‰çª—ä½“ç»§æ‰¿è‡ªbaseFormï¼Œå®ç°ç»Ÿä¸€çš„ç•Œé¢é£æ ¼
- **ç”¨æˆ·æ§ä»¶æ¨¡å—åŒ–**: ä½¿ç”¨UserControlå®ç°åŠŸèƒ½æ¨¡å—çš„ç‹¬ç«‹å¼€å‘å’Œç»´æŠ¤
- **æ•°æ®ç»‘å®š**: ä½¿ç”¨DataGridViewè¿›è¡Œæ•°æ®å±•ç¤ºå’Œäº¤äº’

## ğŸ› ï¸ å¼€å‘ä¿¡æ¯

### å¼€å‘å·¥å…·å’Œç‰ˆæœ¬
- **IDE**: Visual Studio 2022 (v17.14.36109.1)
- **ç›®æ ‡æ¡†æ¶**: .NET Framework 4.8
- **é¡¹ç›®æ¨¡æ¿**: Windows Forms App (.NET Framework)
- **ç‰ˆæœ¬æ§åˆ¶**: Git

### ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…
| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” | è®¸å¯è¯ |
|------|------|------|--------|
| EntityFramework | 6.2.0 | ORMæ•°æ®è®¿é—®æ¡†æ¶ | Apache 2.0 |
| EntityFramework.zh-Hans | 6.2.0 | Entity Frameworkä¸­æ–‡è¯­è¨€åŒ… | Apache 2.0 |

### ç³»ç»Ÿè¦æ±‚
- **æœ€ä½ç³»ç»Ÿè¦æ±‚**: Windows 7 SP1
- **æ¨èç³»ç»Ÿ**: Windows 10/11
- **å†…å­˜è¦æ±‚**: æœ€å°‘2GB RAM
- **ç£ç›˜ç©ºé—´**: è‡³å°‘100MBå¯ç”¨ç©ºé—´
- **æ•°æ®åº“**: SQL Server 2012 Expressæˆ–æ›´é«˜ç‰ˆæœ¬

## ğŸ”§ å·²çŸ¥é—®é¢˜å’Œæ”¹è¿›å»ºè®®

### ğŸ”’ å®‰å…¨æ€§æ”¹è¿›
- [ ] **å¯†ç åŠ å¯†å­˜å‚¨**: å½“å‰å¯†ç æ˜æ–‡å­˜å‚¨ï¼Œå»ºè®®ä½¿ç”¨BCryptæˆ–SHA256åŠ å¯†
- [ ] **SQLæ³¨å…¥é˜²æŠ¤**: è™½ç„¶ä½¿ç”¨EFï¼Œä½†å»ºè®®åŠ å¼ºå‚æ•°éªŒè¯
- [ ] **è¾“å…¥éªŒè¯**: åŠ å¼ºç”¨æˆ·è¾“å…¥çš„éªŒè¯å’Œæ¸…ç†
- [ ] **ä¼šè¯ç®¡ç†**: å®ç°æ›´å®‰å…¨çš„ç”¨æˆ·ä¼šè¯ç®¡ç†æœºåˆ¶

```csharp
// å»ºè®®çš„å¯†ç åŠ å¯†å®ç°
public string HashPassword(string password)
{
    return BCrypt.Net.BCrypt.HashPassword(password);
}

public bool VerifyPassword(string password, string hash)
{
    return BCrypt.Net.BCrypt.Verify(password, hash);
}
```

### ğŸ—ï¸ æ¶æ„æ”¹è¿›
- [ ] **ä¾èµ–æ³¨å…¥**: å¼•å…¥IoCå®¹å™¨ï¼Œå¦‚Unityæˆ–Autofac
- [ ] **å¼‚æ­¥ç¼–ç¨‹**: æ•°æ®åº“æ“ä½œæ”¹ä¸ºå¼‚æ­¥æ¨¡å¼ï¼Œæå‡æ€§èƒ½
- [ ] **æ—¥å¿—è®°å½•**: é›†æˆNLogæˆ–Serilogè¿›è¡Œæ—¥å¿—ç®¡ç†
- [ ] **é…ç½®ç®¡ç†**: å®ç°æ›´çµæ´»çš„é…ç½®ç®¡ç†æ¨¡å¼

### ğŸ§ª è´¨é‡æ”¹è¿›
- [ ] **å•å…ƒæµ‹è¯•**: æ·»åŠ MSTestæˆ–NUnitå•å…ƒæµ‹è¯•
- [ ] **å¼‚å¸¸å¤„ç†**: å®Œå–„å…¨å±€å¼‚å¸¸å¤„ç†æœºåˆ¶
- [ ] **ä»£ç è§„èŒƒ**: éµå¾ªC#ç¼–ç è§„èŒƒï¼Œä½¿ç”¨StyleCop
- [ ] **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–å’Œå†…å­˜ç®¡ç†

### ğŸ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿›
- [ ] **ç°ä»£åŒ–UI**: å‡çº§åˆ°WPFæˆ–ä½¿ç”¨ç°ä»£UIåº“
- [ ] **å“åº”å¼è®¾è®¡**: æ”¯æŒä¸åŒåˆ†è¾¨ç‡å’ŒDPIè®¾ç½®
- [ ] **å¤šè¯­è¨€æ”¯æŒ**: å®ç°å›½é™…åŒ–å’Œæœ¬åœ°åŒ–
- [ ] **ä¸»é¢˜åˆ‡æ¢**: æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢

### ğŸ“± åŠŸèƒ½æ‰©å±•å»ºè®®
- [ ] **é«˜çº§æœç´¢**: å®ç°å¤šæ¡ä»¶ç»„åˆæœç´¢åŠŸèƒ½
- [ ] **æ•°æ®å¯¼å‡º**: æ”¯æŒExcelã€PDFç­‰æ ¼å¼å¯¼å‡º
- [ ] **ç»Ÿè®¡æŠ¥è¡¨**: æ·»åŠ å€Ÿé˜…ç»Ÿè®¡å’Œå›¾è¡¨å±•ç¤º
- [ ] **æ¶ˆæ¯é€šçŸ¥**: å®ç°é€¾æœŸæé†’å’Œæ¶ˆæ¯æ¨é€

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **ä»£ç è¡Œæ•°**: çº¦2000è¡Œ
- **æ–‡ä»¶æ•°é‡**: 30+ä¸ªæºæ–‡ä»¶
- **å¼€å‘å‘¨æœŸ**: é€‚åˆ1-2ä¸ªæœˆçš„æ¯•ä¸šè®¾è®¡é¡¹ç›®
- **éš¾åº¦ç­‰çº§**: ä¸­ç­‰ï¼ˆé€‚åˆæœ‰C#åŸºç¡€çš„å­¦ä¹ è€…ï¼‰

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

### è´¡çŒ®æ­¥éª¤
1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ªC#ç¼–ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿ä»£ç é€šè¿‡ç¼–è¯‘å’Œæµ‹è¯•

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- ğŸ“§ Email: your.email@example.com
- ğŸ› Issues: [GitHub Issues](https://github.com/yourusername/WinFromsLibraryMini/issues)
- ğŸ’¬ è®¨è®º: [GitHub Discussions](https://github.com/yourusername/WinFromsLibraryMini/discussions)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œä½¿ç”¨è€…ï¼

## ğŸ“š ç›¸å…³èµ„æº

- [C# å®˜æ–¹æ–‡æ¡£](https://docs.microsoft.com/zh-cn/dotnet/csharp/)
- [Entity Framework 6 æ–‡æ¡£](https://docs.microsoft.com/zh-cn/ef/ef6/)
- [Windows Forms æ–‡æ¡£](https://docs.microsoft.com/zh-cn/dotnet/desktop/winforms/)
- [SQL Server æ–‡æ¡£](https://docs.microsoft.com/zh-cn/sql/sql-server/)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼

ğŸ“ **æœ€åæ›´æ–°**: 2025å¹´1æœˆ

ğŸ¯ **é¡¹ç›®çŠ¶æ€**: æ´»è·ƒå¼€å‘ä¸­